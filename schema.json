{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://mlicytacje.pl/schemas/surveyjs-core.schema.json",
  "title": "SurveyJS Core JSON (headless-friendly) â€” minimized (fixed)",
  "type": "object",
  "additionalProperties": false,
  "oneOf": [ { "required": [ "pages" ] }, { "required": [ "elements" ] } ],
  "properties": {
    "$schema": { "type": "string", "format": "uri" },
    "description": { "type": "string" },
    "title": { "type": "string" },
    "readOnly": { "type": "boolean" },
    "checkErrorsMode": {
      "type": "string",
      "enum": [ "onNextPage", "onValueChanged", "onComplete" ],
      "default": "onNextPage"
    },
    "clearInvisibleValues": {
      "type": "string",
      "enum": [ "onComplete", "onHidden", "onHiddenContainer", "none" ],
      "default": "onComplete"
    },
    "calculatedValues": { "type": "array", "items": { "$ref": "#/$defs/calculatedValue" } },
    "triggers": { "type": "array", "items": { "$ref": "#/$defs/trigger" } },
    "elements": { "type": "array", "items": { "$ref": "#/$defs/element" } },
    "pages": { "type": "array", "items": { "$ref": "#/$defs/page" } }
  },
  "$defs": {
    "expression": { "type": "string" },
    "xProps": { "type": "object", "additionalProperties": true },
    "variable": {
      "type": "object",
      "additionalProperties": true,
      "required": [ "name" ],
      "properties": {
        "name": { "type": "string", "minLength": 1 },
        "value": {  },
        "expression": { "$ref": "#/$defs/expression" }
      }
    },
    "calculatedValue": {
      "type": "object",
      "additionalProperties": true,
      "required": [ "name", "expression" ],
      "properties": {
        "name": { "type": "string", "minLength": 1 },
        "expression": { "$ref": "#/$defs/expression" },
        "includeIntoResult": { "type": "boolean", "default": false }
      }
    },
    "trigger": {
      "type": "object",
      "additionalProperties": true,
      "required": [ "type" ],
      "properties": {
        "type": { "type": "string" },
        "expression": { "$ref": "#/$defs/expression" },
        "name": { "type": "string" },
        "operator": { "type": "string" },
        "value": {  },
        "setToName": { "type": "string" },
        "setValue": {  },
        "setValueExpression": { "$ref": "#/$defs/expression" },
        "fromName": { "type": "string" },
        "gotoName": { "type": "string" },
        "isVariable": { "type": "boolean" }
      },
      "allOf": [ { "if": { "properties": { "type": { "const": "setvalue" } }, "required": [ "type" ] }, "then": { "required": [ "setToName" ], "anyOf": [ { "required": [ "setValue" ] }, { "required": [ "setValueExpression" ] } ] } }, { "if": { "properties": { "type": { "const": "copyvalue" } }, "required": [ "type" ] }, "then": { "required": [ "setToName", "fromName" ] } }, { "if": { "properties": { "type": { "const": "runexpression" } }, "required": [ "type" ] }, "then": { "required": [ "expression" ] } }, { "if": { "properties": { "type": { "const": "skip" } }, "required": [ "type" ] }, "then": { "required": [ "gotoName" ] } } ]
    },
    "validator": {
      "type": "object",
      "additionalProperties": true,
      "required": [ "type" ],
      "properties": {
        "type": { "type": "string" },
        "text": { "type": "string" },
        "regex": { "type": "string" },
        "minValue": { "type": "number" },
        "maxValue": { "type": "number" },
        "minLength": { "type": "integer", "minimum": 0 },
        "maxLength": { "type": "integer", "minimum": 0 },
        "minCount": { "type": "integer", "minimum": 0 },
        "maxCount": { "type": "integer", "minimum": 0 },
        "expression": { "$ref": "#/$defs/expression" }
      }
    },
    "choiceItem": { "oneOf": [ { "type": "string" }, {
        "type": "object",
        "additionalProperties": true,
        "required": [ "value" ],
        "properties": {
          "value": {  },
          "text": { "type": "string" },
          "visibleIf": { "$ref": "#/$defs/expression" },
          "enableIf": { "$ref": "#/$defs/expression" }
        }
      } ] },
    "choices": { "type": "array", "items": { "$ref": "#/$defs/choiceItem" } },
    "baseElement": {
      "type": "object",
      "required": [ "type", "name" ],
      "additionalProperties": true,
      "properties": {
        "type": { "type": "string" },
        "name": { "type": "string", "minLength": 1 },
        "title": { "type": "string" },
        "visible": { "type": "boolean" },
        "visibleIf": { "$ref": "#/$defs/expression" },
        "isRequired": { "type": "boolean" },
        "requiredIf": { "$ref": "#/$defs/expression" },
        "readOnly": { "type": "boolean" },
        "readOnlyIf": { "$ref": "#/$defs/expression" },
        "enableIf": { "$ref": "#/$defs/expression" },
        "defaultValue": {  },
        "defaultValueExpression": { "$ref": "#/$defs/expression" },
        "requiredErrorText": { "type": "string" },
        "validators": { "type": "array", "items": { "$ref": "#/$defs/validator" } },
        "x-props": { "$ref": "#/$defs/xProps" }
      }
    },
    "questionBase": { "allOf": [ { "$ref": "#/$defs/baseElement" }, {
        "type": "object",
        "additionalProperties": true,
        "properties": {
          "placeholder": { "type": "string" },
          "inputType": { "type": "string", "enum": [ "text", "email", "tel", "url", "number", "password", "date", "datetime-local" ] },
          "min": { "type": "number" },
          "max": { "type": "number" },
          "maxLength": { "type": "integer", "minimum": 0 },
          "rows": { "type": "integer", "minimum": 1 },
          "choices": { "$ref": "#/$defs/choices" },
          "choicesOrder": { "type": "string", "enum": [ "none", "asc", "desc" ] },
          "showOtherItem": { "type": "boolean" },
          "otherText": { "type": "string" },
          "storeOthersAsComment": { "type": "boolean" },
          "maxSelectedChoices": { "type": "integer", "minimum": 0 },
          "allowClear": { "type": "boolean" },
          "storeDataAsText": { "type": "boolean" },
          "allowMultiple": { "type": "boolean" },
          "maxSize": { "type": "integer", "minimum": 0 },
          "acceptedTypes": { "type": "string" },
          "dateFormat": { "type": "string" },
          "labelTrue": { "type": "string" },
          "labelFalse": { "type": "string" }
        }
      } ] },
    "question_text": { "allOf": [ { "$ref": "#/$defs/questionBase" }, { "type": "object", "properties": { "type": { "const": "text" } } } ] },
    "question_date": { "allOf": [ { "$ref": "#/$defs/questionBase" }, { "properties": { "type": { "const": "date" } } } ] },
    "question_comment": { "allOf": [ { "$ref": "#/$defs/questionBase" }, { "properties": { "type": { "const": "comment" } } } ] },
    "question_boolean": { "allOf": [ { "$ref": "#/$defs/questionBase" }, { "properties": { "type": { "const": "boolean" }, "defaultValue": { "type": "boolean" } } } ] },
    "question_file": { "allOf": [ { "$ref": "#/$defs/questionBase" }, { "properties": { "type": { "const": "file" } } } ] },
    "question_radiogroup": { "allOf": [ { "$ref": "#/$defs/questionBase" }, { "properties": { "type": { "const": "radiogroup" } } } ] },
    "question_dropdown": { "allOf": [ { "$ref": "#/$defs/questionBase" }, { "properties": { "type": { "const": "dropdown" } } } ] },
    "question_checkbox": { "allOf": [ { "$ref": "#/$defs/questionBase" }, { "properties": { "type": { "const": "checkbox" } } } ] },
    "question_tagbox": { "allOf": [ { "$ref": "#/$defs/questionBase" }, { "properties": { "type": { "const": "tagbox" } } } ] },
    "question_expression": { "allOf": [ { "$ref": "#/$defs/baseElement" }, {
        "type": "object",
        "additionalProperties": true,
        "required": [ "expression" ],
        "properties": {
          "type": { "const": "expression" },
          "expression": { "$ref": "#/$defs/expression" },
          "format": { "type": "string" },
          "displayStyle": {
            "type": "string",
            "enum": [ "decimal", "currency", "percent", "date", "none" ],
            "default": "none"
          },
          "currency": { "type": "string" },
          "useGrouping": { "type": "boolean", "default": true },
          "precision": {
            "type": "integer",
            "minimum": -1,
            "maximum": 20,
            "default": -1
          },
          "minimumFractionDigits": {
            "type": "integer",
            "minimum": -1,
            "maximum": 20,
            "default": -1
          },
          "maximumFractionDigits": {
            "type": "integer",
            "minimum": -1,
            "maximum": 20,
            "default": -1
          },
          "runIfReadOnly": { "type": "boolean", "default": true }
        }
      } ] },
    "question_multipletext": { "allOf": [ { "$ref": "#/$defs/baseElement" }, {
        "type": "object",
        "required": [ "items" ],
        "additionalProperties": true,
        "properties": { "type": { "const": "multipletext" }, "items": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "additionalProperties": true,
            "required": [ "name" ],
            "properties": {
              "name": { "type": "string" },
              "title": { "type": "string" },
              "placeholder": { "type": "string" },
              "inputType": { "type": "string", "enum": [ "text", "email", "tel", "url", "number", "password", "date", "datetime-local" ] },
              "isRequired": { "type": "boolean" },
              "requiredIf": { "$ref": "#/$defs/expression" },
              "visibleIf": { "$ref": "#/$defs/expression" },
              "readOnlyIf": { "$ref": "#/$defs/expression" },
              "x-props": { "$ref": "#/$defs/xProps" }
            }
          }
        } }
      } ] },
    "panel": { "allOf": [ { "$ref": "#/$defs/baseElement" }, {
        "type": "object",
        "required": [ "elements" ],
        "additionalProperties": true,
        "properties": {
          "type": { "const": "panel" },
          "elements": { "type": "array", "items": { "$ref": "#/$defs/element" } },
          "renderAs": { "type": "string", "anyOf": [ { "enum": [ "section", "grid", "box", "button", "cancel", "submit", "notification" ] }, { "pattern": "^(custom:).+" } ] }
        }
      } ] },
    "element": { "oneOf": [ { "$ref": "#/$defs/question_text" }, { "$ref": "#/$defs/question_date" }, { "$ref": "#/$defs/question_expression" }, { "$ref": "#/$defs/question_multipletext" }, { "$ref": "#/$defs/question_boolean" }, { "$ref": "#/$defs/question_comment" }, { "$ref": "#/$defs/question_file" }, { "$ref": "#/$defs/question_radiogroup" }, { "$ref": "#/$defs/question_checkbox" }, { "$ref": "#/$defs/question_dropdown" }, { "$ref": "#/$defs/question_tagbox" }, { "$ref": "#/$defs/panel" } ] },
    "page": {
      "type": "object",
      "additionalProperties": true,
      "required": [ "name" ],
      "properties": {
        "name": { "type": "string" },
        "title": { "type": "string" },
        "visible": { "type": "boolean" },
        "visibleIf": { "$ref": "#/$defs/expression" },
        "elements": { "type": "array", "items": { "$ref": "#/$defs/element" } }
      }
    }
  }
}
